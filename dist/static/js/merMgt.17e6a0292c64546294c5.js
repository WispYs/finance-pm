(window.finance__webpackJsonp=window.finance__webpackJsonp||[]).push([[7],{226:function(e,t,a){"use strict";a(241),a(384);t.a={getDate:function(e){if(""===e)return"";var t=new Date(e),a={Y:t.getFullYear(),M:t.getMonth()+1,D:t.getDate()};return a.Y+"-"+this.preZero(a.M)+"-"+this.preZero(a.D)},getDateTime:function(e){if(""===e)return"";var t=new Date(e),a={Y:t.getFullYear(),M:t.getMonth()+1,D:t.getDate(),h:t.getHours(),m:t.getMinutes(),s:t.getSeconds()};return a.Y+"-"+this.preZero(a.M)+"-"+this.preZero(a.D)+" "+this.preZero(a.h)+":"+this.preZero(a.m)+":"+this.preZero(a.s)},preZero:function(e){return("00"+e).slice(-2)},formatDecimals:function(e){return parseFloat(e||0).toFixed(2)},formatMoney:function(e){return parseFloat(e||0).toFixed(2).replace(/\B(?=(\d{3})+(?!\d))/g,",")},formatCommercialType:function(e){switch(Number(e)){case 1:return"个人商户";case 2:return"个体商户";case 3:return"企业商户";default:return""}},formatReviewStatus:function(e){switch(e){case"S":return"审核成功";case"P":return"审核中";case"F":return"审核失败";default:return""}},formatUserType:function(e){switch(Number(e)){case 1:return"水滴用户";case 2:return"平台用户";case 3:return"普通用户";default:return""}},formatFundFlow:function(e){switch(e){case"IN":return"收入";case"OUT":return"支出";default:return""}},formatTradeStatus:function(e){switch(e){case"S":return"成功";case"F":return"失败";case"P":return"未支付";default:return""}},formatSettlementType:function(e){switch(e){case"0":return"补账";case"1":return"手动结算";case"2":return"T+1自动结算";default:return""}},formatSettlementStatus:function(e){switch(e){case"S":return"成功";case"F":return"失败";case"P":return"处理中";default:return""}}}},406:function(e,t,a){var r={"./af":242,"./af.js":242,"./ar":243,"./ar-dz":244,"./ar-dz.js":244,"./ar-kw":245,"./ar-kw.js":245,"./ar-ly":246,"./ar-ly.js":246,"./ar-ma":247,"./ar-ma.js":247,"./ar-sa":248,"./ar-sa.js":248,"./ar-tn":249,"./ar-tn.js":249,"./ar.js":243,"./az":250,"./az.js":250,"./be":251,"./be.js":251,"./bg":252,"./bg.js":252,"./bm":253,"./bm.js":253,"./bn":254,"./bn.js":254,"./bo":255,"./bo.js":255,"./br":256,"./br.js":256,"./bs":257,"./bs.js":257,"./ca":258,"./ca.js":258,"./cs":259,"./cs.js":259,"./cv":260,"./cv.js":260,"./cy":261,"./cy.js":261,"./da":262,"./da.js":262,"./de":263,"./de-at":264,"./de-at.js":264,"./de-ch":265,"./de-ch.js":265,"./de.js":263,"./dv":266,"./dv.js":266,"./el":267,"./el.js":267,"./en-au":268,"./en-au.js":268,"./en-ca":269,"./en-ca.js":269,"./en-gb":270,"./en-gb.js":270,"./en-ie":271,"./en-ie.js":271,"./en-il":272,"./en-il.js":272,"./en-nz":273,"./en-nz.js":273,"./eo":274,"./eo.js":274,"./es":275,"./es-do":276,"./es-do.js":276,"./es-us":277,"./es-us.js":277,"./es.js":275,"./et":278,"./et.js":278,"./eu":279,"./eu.js":279,"./fa":280,"./fa.js":280,"./fi":281,"./fi.js":281,"./fo":282,"./fo.js":282,"./fr":283,"./fr-ca":284,"./fr-ca.js":284,"./fr-ch":285,"./fr-ch.js":285,"./fr.js":283,"./fy":286,"./fy.js":286,"./gd":287,"./gd.js":287,"./gl":288,"./gl.js":288,"./gom-latn":289,"./gom-latn.js":289,"./gu":290,"./gu.js":290,"./he":291,"./he.js":291,"./hi":292,"./hi.js":292,"./hr":293,"./hr.js":293,"./hu":294,"./hu.js":294,"./hy-am":295,"./hy-am.js":295,"./id":296,"./id.js":296,"./is":297,"./is.js":297,"./it":298,"./it.js":298,"./ja":299,"./ja.js":299,"./jv":300,"./jv.js":300,"./ka":301,"./ka.js":301,"./kk":302,"./kk.js":302,"./km":303,"./km.js":303,"./kn":304,"./kn.js":304,"./ko":305,"./ko.js":305,"./ky":306,"./ky.js":306,"./lb":307,"./lb.js":307,"./lo":308,"./lo.js":308,"./lt":309,"./lt.js":309,"./lv":310,"./lv.js":310,"./me":311,"./me.js":311,"./mi":312,"./mi.js":312,"./mk":313,"./mk.js":313,"./ml":314,"./ml.js":314,"./mn":315,"./mn.js":315,"./mr":316,"./mr.js":316,"./ms":317,"./ms-my":318,"./ms-my.js":318,"./ms.js":317,"./mt":319,"./mt.js":319,"./my":320,"./my.js":320,"./nb":321,"./nb.js":321,"./ne":322,"./ne.js":322,"./nl":323,"./nl-be":324,"./nl-be.js":324,"./nl.js":323,"./nn":325,"./nn.js":325,"./pa-in":326,"./pa-in.js":326,"./pl":327,"./pl.js":327,"./pt":328,"./pt-br":329,"./pt-br.js":329,"./pt.js":328,"./ro":330,"./ro.js":330,"./ru":331,"./ru.js":331,"./sd":332,"./sd.js":332,"./se":333,"./se.js":333,"./si":334,"./si.js":334,"./sk":335,"./sk.js":335,"./sl":336,"./sl.js":336,"./sq":337,"./sq.js":337,"./sr":338,"./sr-cyrl":339,"./sr-cyrl.js":339,"./sr.js":338,"./ss":340,"./ss.js":340,"./sv":341,"./sv.js":341,"./sw":342,"./sw.js":342,"./ta":343,"./ta.js":343,"./te":344,"./te.js":344,"./tet":345,"./tet.js":345,"./tg":346,"./tg.js":346,"./th":347,"./th.js":347,"./tl-ph":348,"./tl-ph.js":348,"./tlh":349,"./tlh.js":349,"./tr":350,"./tr.js":350,"./tzl":351,"./tzl.js":351,"./tzm":352,"./tzm-latn":353,"./tzm-latn.js":353,"./tzm.js":352,"./ug-cn":354,"./ug-cn.js":354,"./uk":355,"./uk.js":355,"./ur":356,"./ur.js":356,"./uz":357,"./uz-latn":358,"./uz-latn.js":358,"./uz.js":357,"./vi":359,"./vi.js":359,"./x-pseudo":360,"./x-pseudo.js":360,"./yo":361,"./yo.js":361,"./zh-cn":362,"./zh-cn.js":362,"./zh-hk":363,"./zh-hk.js":363,"./zh-tw":364,"./zh-tw.js":364};function i(e){var t=n(e);return a(t)}function n(e){var t=r[e];if(t+1)return t;var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}i.keys=function(){return Object.keys(r)},i.resolve=n,(e.exports=i).id=406},430:function(e,t,a){"use strict";t.a=[{no:1,merchantId:10001,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:2,merchantId:10002,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:3,merchantId:10003,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:4,merchantId:10004,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"费率承担方：租客承担",reason:"会员升级",operator:"管理员"},{no:5,merchantId:10005,merchantName:"幸福公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:6,merchantId:10006,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:7,merchantId:10007,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:8,merchantId:10008,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:9,merchantId:10009,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"微信（线下）通道：1.00%",reason:"会员升级",operator:"管理员"},{no:10,merchantId:100010,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:11,merchantId:100011,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"},{no:12,merchantId:100012,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"微信（线上）通道：1.00%",reason:"会员升级",operator:"管理员"},{no:13,merchantId:100013,merchantName:"智尚佳公寓",modifiedAt:"2018.10.27 23:59:59",content:"支付宝（线下）通道 ：0.60%",reason:"会员升级",operator:"管理员"}]},454:function(e,t,a){},455:function(e,t,a){},456:function(e,t,a){},457:function(e,t,a){},458:function(e,t,a){},459:function(e,t,a){},460:function(e,t,a){},461:function(e,t,a){"use strict";t.a={data:[{no:1,createdTime:"2019-02-21",merchantId:"10001",cardId:"140333165461232221",merchantName:"上海幸福公寓管理有限公司",userType:1,affliliateMerchant:"水滴管家",status:"S"},{no:2,createdTime:"2019-02-21",merchantId:"10002",cardId:"140333165461232221",merchantName:"上海苹果公寓管理有限公司",userType:1,affliliateMerchant:"水滴管家",status:"S"},{no:3,createdTime:"2019-02-21",merchantId:"10003",cardId:"140333165461232221",merchantName:"上海苹果公寓管理有限公司",userType:0,affliliateMerchant:"水滴管家",status:"F"},{no:4,createdTime:"2019-02-21",merchantId:"10004",cardId:"140333165461232221",merchantName:"上海幸福公寓管理有限公司",userType:1,affliliateMerchant:"水滴管家",status:"P"},{no:5,createdTime:"2019-02-21",merchantId:"10005",cardId:"140333165461232221",merchantName:"上海幸福公寓管理有限公司",userType:2,affliliateMerchant:"水滴管家",status:"F"},{no:6,createdTime:"2019-02-21",merchantId:"10006",cardId:"140333165461232221",merchantName:"上海幸福公寓管理有限公司",userType:1,affliliateMerchant:"水滴管家",status:"S"}],meta:{payChannels:[{name:"全部"},{name:"支付宝(线上)"},{name:"支付宝(线下)"},{name:"微信(线上)"},{name:"微信(线下)"},{name:"借记卡"},{name:"网银支付"}],vipTypes:[{name:"全部"},{name:"蓝钻水滴"},{name:"超级水滴"},{name:"银水滴"},{name:"金水滴"},{name:"其它"}],tableFileds:[{key:"createdTime",label:"创建时间"},{key:"merchantId",label:"商户Id"},{key:"merchantName",label:"商户名称"},{key:"userType",label:"用户类型"},{key:"affliliateMerchant",label:"所属商户"},{key:"status",label:"status"}],pagination:{pageSize:20,pageCount:5,total:100}}}},462:function(e,t,a){},463:function(e,t,a){},464:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},468:function(e,t,a){},469:function(e,t,a){},470:function(e,t,a){},621:function(e,t,a){"use strict";var r=a(454);a.n(r).a},622:function(e,t,a){"use strict";var r=a(455);a.n(r).a},623:function(e,t,a){"use strict";var r=a(456);a.n(r).a},624:function(e,t,a){"use strict";var r=a(457);a.n(r).a},627:function(e,t,a){"use strict";var r=a(458);a.n(r).a},628:function(e,t,a){"use strict";var r=a(459);a.n(r).a},629:function(e,t,a){"use strict";var r=a(460);a.n(r).a},630:function(e,t,a){"use strict";var r=a(462);a.n(r).a},631:function(e,t,a){"use strict";var r=a(463);a.n(r).a},632:function(e,t,a){"use strict";var r=a(464);a.n(r).a},633:function(e,t,a){"use strict";var r=a(466);a.n(r).a},634:function(e,t,a){"use strict";var r=a(467);a.n(r).a},635:function(e,t,a){"use strict";var r=a(468);a.n(r).a},637:function(e,t,a){"use strict";var r=a(469);a.n(r).a},638:function(e,t,a){"use strict";var r=a(470);a.n(r).a},977:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant-list"},[a("div",{staticClass:"merchant-list__filter-bar"},[a("el-collapse",{model:{value:t.filterBarActiveName,callback:function(e){t.filterBarActiveName=e},expression:"filterBarActiveName"}},[a("el-collapse-item",{attrs:{title:"筛选条件",name:"1"}},[a("filter-bar",{attrs:{"parent-merchant-options":t.parentMerchantOptions},on:{"query-click":t.queryMerchants,"reset-click":t.queryMerchants}})],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-list__table"},[a("merchant-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"加载中",merchants:t.merchants},on:{"selection-change":t.selectedMerchantChange,"set-table-field-click":t.toSetTableField,"freeze-click":t.toFreezeMerchant,"unfreeze-click":t.toUnfreezeMerchant,"edit-fee-click":t.toEditFee,"edit-fee-payer-click":t.toEditFeePayer}})],1),t._v(" "),0<t.merchantsTotal?a("div",{staticClass:"merchant-list__pagination-bar"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":t.pageSize,total:t.merchantsTotal},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.currentPageChange}})],1):t._e(),t._v(" "),t.logDialogVisible?a("log-dialog",{on:{"close-click":function(e){t.logDialogVisible=!1}}}):t._e(),t._v(" "),t.setTableFieldDialogVisible?a("set-table-field-dialog",{on:{"cancel-set":function(e){t.setTableFieldDialogVisible=!1},"set-done":t.setTableFieldDone}}):t._e(),t._v(" "),t.freezeMerchantDialogVisible?a("freeze-merchant-dialog",{attrs:{merchant:t.merchantForFreeze},on:{"cancel-freeze":function(e){t.freezeMerchantDialogVisible=!1},"freeze-done":t.freezeMerchantDone}}):t._e(),t._v(" "),t.unfreezeMerchantDialogVisible?a("unfreeze-merchant-dialog",{attrs:{merchant:t.merchantForUnfreeze},on:{"cancel-unfreeze":function(e){t.unfreezeMerchantDialogVisible=!1},"unfreeze-done":t.unfreezeMerchantDone}}):t._e(),t._v(" "),t.editFeeDialogVisible?a("edit-fee-dialog",{attrs:{"is-batch":t.isBatchEditFee,merchants:t.merchantsForEditFee},on:{"cancel-edit":function(e){t.editFeeDialogVisible=!1},"edit-done":t.editFeeDone}}):t._e(),t._v(" "),t.editFeePayerDialogVisible?a("edit-fee-payer-dialog",{attrs:{merchant:t.merchantForEditFeePayer},on:{"cancel-edit":function(e){t.editFeePayerDialogVisible=!1},"edit-done":t.editFeePayerDone}}):t._e()],1)};r._withStripped=!0;a(234);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"filter-bar"},[a("div",{staticClass:"filter-bar__row"},[a("div",{staticClass:"filter-bar__item"},[a("label",[t._v("创建时间")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"left","value-format":"yyyy-MM-dd","unlink-panels":"","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.tradeDate,callback:function(e){t.tradeDate=e},expression:"tradeDate"}})],1),t._v(" "),a("div",{staticClass:"filter-bar__item"},[a("label",[t._v("状态")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.reviewStatus,callback:function(e){t.reviewStatus=e},expression:"reviewStatus"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.statusOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1),t._v(" "),"1"==t.financeType?a("div",{staticClass:"filter-bar__item"},[a("label",[t._v("用户类型")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.userTypeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2)],1):t._e(),t._v(" "),"1"==t.financeType?a("div",{staticClass:"filter-bar__item"},[a("label",[t._v("所属商户")]),t._v(" "),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.pid,callback:function(e){t.pid=e},expression:"pid"}},[a("el-option",{key:"",attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.parentMerchantOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1):t._e(),t._v(" "),a("div",{staticClass:"filter-bar__item"},[a("label",[t._v("搜索")]),t._v(" "),a("el-input",{attrs:{clearable:"",placeholder:"请输入商户名称/商户ID","prefix-icon":"el-icon-search"},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1)]),t._v(" "),a("div"),t._v(" "),a("div",{staticClass:"filter-bar__query"},[a("el-button",{attrs:{type:"primary"},on:{click:t.query}},[t._v("搜索")]),t._v(" "),a("el-button",{on:{click:t.reset}},[t._v("重置")]),t._v(" "),a("el-button",{staticClass:"filter-bar__query-create",attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"merchantMgt__createMerchant"})}}},[a("i",{staticClass:"fa fa-user-plus create-user-icon",attrs:{"aria-hidden":"true"}}),t._v("\n        添加平台用户\n      ")])],1)])};i._withStripped=!0;var n=a(212),s=a.n(n),l={props:["parentMerchantOptions"],data:function(){return{financeType:"",reviewStatus:"",type:"",parentMerchant:"",pid:"",data:"",tradeDate:[],statusOptions:[{value:"S",label:"审核成功"},{value:"P",label:"审核中"},{value:"F",label:"审核失败"}],userTypeOptions:[{value:2,label:"平台用户"},{value:3,label:"普通用户"}],pickerOptions:{shortcuts:[{text:"今天",onClick:function(e){var t=s()().format("YYYY-MM-DD");e.$emit("pick",[t,t])}},{text:"昨天",onClick:function(e){var t=s()().subtract(1,"days").format("YYYY-MM-DD");e.$emit("pick",[t,t])}},{text:"最近一周",onClick:function(e){var t=s()().format("YYYY-MM-DD"),a=s()().subtract(6,"days").format("YYYY-MM-DD");e.$emit("pick",[a,t])}}]}}},watch:{"$store.state.user.type":function(){this.financeType=this.$store.state.user.type}},methods:{__initFilter:function(){var e=s()().format("YYYY-MM-DD");this.tradeDate=[e,e],this.reviewStatus="",this.type="",this.parentMerchant="",this.pid="",this.data=""},__getFilter:function(){return{startTime:this.tradeDate?this.tradeDate[0]:"",endTime:this.tradeDate?this.tradeDate[1]:"",reviewStatus:this.reviewStatus,type:this.type,parentMerchant:this.parentMerchant,pid:this.pid,data:this.data}},query:function(){this.$emit("query-click",this.__getFilter())},reset:function(){this.__initFilter(),this.$emit("reset-click",this.__getFilter())}},created:function(){this.__initFilter(),this.financeType=this.$store.state.user?this.$store.state.user.type:""}},c=(a(621),a(64)),o=Object(c.a)(l,i,[],!1,null,"071a2100",null);o.options.__file="src/entries/merchant/merchant-list/FilterBar.vue";var m=o.exports,u=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"merchant-table"},[r("el-table",{ref:"merchantTable",attrs:{data:a.merchants,border:"","empty-text":"没有符合查询条件的数据"},on:{"selection-change":a.selectionChange}},[r("el-table-column",{attrs:{label:"序号",width:"50","show-overflow-tooltip":"",fixed:"left"},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.no))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"创建时间","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.time))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"商户Id","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.id))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"商户名称",width:"250","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.name))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"证件号",width:"160","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.businessLicenseNo))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"用户类型","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(a.formatType(e.row.type)))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"所属商户","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(e.row.parentName))]}}])}),a._v(" "),r("el-table-column",{attrs:{label:"状态","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(e){return[a._v(a._s(a.formatStatus(e.row.reviewStatus)))]}}])}),a._v(" "),r("el-table-column",{attrs:{fixed:"right",width:"100"},scopedSlots:a._u([{key:"header",fn:function(e){return[r("span",[a._v("操作")])]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){a.$router.push({name:a.formatDetailRoute(t.row.reviewStatus),params:{status:t.row.reviewStatus,merchantId:t.row.id}})}}},[a._v("\n          详情\n        ")])]}}])})],1)],1)};u._withStripped=!0;var d=new(a(0).default),h=a(226),f={props:["merchants"],methods:{selectionChange:function(e){d.$emit("merchant-table-selection-change",e.length===this.merchants.length),this.$emit("selection-change",e)},toSetTableField:function(){this.$emit("set-table-field-click")},toFreezeMerchant:function(e){this.$emit("freeze-click",e)},toUnfreezeMerchant:function(e){this.$emit("unfreeze-click",e)},toEditFee:function(e){this.$emit("edit-fee-click",!1,e)},toEditFeePayer:function(e){this.$emit("edit-fee-payer-click",e)},formatType:function(e){return h.a.formatUserType(e)},formatStatus:function(e){return h.a.formatReviewStatus(e)},formatDetailRoute:function(e){switch(e){case"S":return"merchantMgt__merchantDetailSuccess";case"F":return"merchantMgt__merchantDetailFail";case"P":return"merchantMgt__merchantDetailProcess"}}},created:function(){var t=this;d.$on("footer-bar-selection-change",function(e){e?t.$refs.merchantTable.toggleAllSelection():t.$refs.merchantTable.clearSelection()})},beforeDestroy:function(){d.$off("footer-bar-selection-change")}},p=(a(622),Object(c.a)(f,u,[],!1,null,"e369062a",null));p.options.__file="src/entries/merchant/merchant-list/MerchantTable.vue";var v=p.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"footer-bar",class:{"is-fixed":t.isFixed,"is-wider":t.isWider}},[a("div",{staticClass:"footer-bar__right"},[a("span",{staticClass:"footer-bar__total"},[t._v("共 "+t._s(t.total)+" 项")]),t._v(" "),a("span",{staticClass:"footer-bar__page-size"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.selectPageSize}},[a("span",[t._v("\n          每页 "+t._s(t.pageSize)+" 项\n          "),a("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"10",disabled:10===t.pageSize}},[t._v("10")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"20",disabled:20===t.pageSize}},[t._v("20")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"50",disabled:25===t.pageSize}},[t._v("50")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"60",disabled:30===t.pageSize}},[t._v("60")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"70",disabled:35===t.pageSize}},[t._v("70")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"80",disabled:40===t.pageSize}},[t._v("80")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"90",disabled:45===t.pageSize}},[t._v("90")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"100",disabled:50===t.pageSize}},[t._v("100")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"200",disabled:200===t.pageSize}},[t._v("200")])],1)],1)],1),t._v(" "),a("span",{staticClass:"footer-bar__switch-page"},[a("span",{staticClass:"el-icon-d-arrow-left first-btn",class:{disabled:1===t.currentPage},on:{click:function(e){t.toPage(1)}}}),t._v(" "),a("span",{staticClass:"el-icon-arrow-left prev-btn",class:{disabled:1===t.currentPage},on:{click:function(e){t.toPage(t.currentPage-1)}}}),t._v(" "),a("span",[t._v(t._s(t.currentPage)+"/"+t._s(t.pageCount))]),t._v(" "),a("span",{staticClass:"el-icon-arrow-right next-btn",class:{disabled:t.currentPage===t.pageCount},on:{click:function(e){t.toPage(t.currentPage+1)}}}),t._v(" "),a("span",{staticClass:"el-icon-d-arrow-right last-btn",class:{disabled:t.currentPage===t.pageCount},on:{click:function(e){t.toPage(t.pageCount)}}})])])])};_._withStripped=!0;var b={props:["isFixed","editFeeEnable","pagination"],data:function(){return{isSelectAll:!1}},computed:{isWider:function(){return this.$store.state.sidebarCollapse},pageSize:function(){return this.pagination.pageSize},pageCount:function(){return this.pagination.pageCount},currentPage:function(){return this.pagination.currentPage},total:function(){return this.pagination.total}},methods:{selectAllChange:function(){d.$emit("footer-bar-selection-change",this.isSelectAll)},selectPageSize:function(e){this.$emit("page-size-change",parseInt(e))},toPage:function(e){e!==this.currentPage&&1<=e&&e<=this.pageCount&&this.$emit("current-page-change",e)}},created:function(){var t=this;d.$on("merchant-table-selection-change",function(e){t.isSelectAll=e})},beforeDestroy:function(){d.$off("merchant-table-selection-change")}},g=(a(623),Object(c.a)(b,_,[],!1,null,"2d6a3006",null));g.options.__file="src/entries/merchant/merchant-list/FooterBar.vue";var y=g.exports,k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"log-dialog"},[a("el-dialog",{attrs:{title:"日志记录",width:"60%",visible:!0,"close-on-click-modal":!1,"before-close":function(){return t.$emit("close-click")}}},[a("div",{staticClass:"log-dialog__main"},[a("div",{staticClass:"log-dialog__search-box"},[a("el-input",{attrs:{clearable:"",placeholder:"商户号,时间"},on:{clear:t.search},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1),t._v(" "),a("div",{staticClass:"log-dialog__table"},[a("el-table",{attrs:{data:t.logs,resizable:"",border:"","max-height":"350","empty-text":"没有符合查询条件的数据"}},[a("el-table-column",{attrs:{label:"序号",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.no))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商户号",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.merchantId))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商户名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.merchantName))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"修改时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.modifiedAt))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"修改内容"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.content))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"修改原因",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.reason))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作员",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.operator))]}}])})],1)],1),t._v(" "),a("div",{staticClass:"log-dialog__pagination-bar"},[a("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next","current-page":t.currentPage,"page-size":100,total:1e3},on:{"update:currentPage":function(e){t.currentPage=e},"current-change":t.currentPageChange}})],1)])])],1)};k._withStripped=!0;var C=a(430),N={data:function(){return{logs:[],keyword:"",currentPage:1}},methods:{__fetchLogs:function(){this.logs=C.a},search:function(){},currentPageChange:function(){}},created:function(){this.__fetchLogs()}},D=(a(624),Object(c.a)(N,k,[],!1,null,"3b9e9331",null));D.options.__file="src/entries/merchant/merchant-list/LogDialog.vue";var T=D.exports,w=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"set-table-field-dialog"},[r("el-dialog",{attrs:{title:"设置表格显示字段",visible:!0,"close-on-click-modal":!1,"before-close":a.close}},[r("div",{staticClass:"set-table-field-dialog__main"},[r("div",{staticClass:"set-table-field-dialog__invisible-field"},[r("label",{staticClass:"set-table-field-dialog__invisible-field__label"},[a._v("\n          未显示的字段("+a._s(a.invisibleFields.length)+")\n        ")]),a._v(" "),r("div",{staticClass:"set-table-field-dialog__invisible-field__drag-box"},[r("draggable",{attrs:{options:a.dragOptions},model:{value:a.invisibleFields,callback:function(e){a.invisibleFields=e},expression:"invisibleFields"}},a._l(a.invisibleFields,function(e,t){return r("div",{key:t,staticClass:"drag-item"},[a._v("\n              "+a._s(e)+"\n            ")])}))],1)]),a._v(" "),r("div",{staticClass:"set-table-field-dialog__visible-field"},[r("label",{staticClass:"set-table-field-dialog__visible-field__label"},[r("span",[a._v("显示的字段("+a._s(a.visibleFields.length)+")")]),a._v(" "),r("span",{staticClass:"tips"},[a._v("拖动可进行排序")])]),a._v(" "),r("div",{staticClass:"set-table-field-dialog__visible-field__drag-box"},[r("div",{staticClass:"fixed-item"},[a._v("序号")]),a._v(" "),r("draggable",{attrs:{options:a.dragOptions},model:{value:a.visibleFields,callback:function(e){a.visibleFields=e},expression:"visibleFields"}},a._l(a.visibleFields,function(e,t){return r("div",{key:t,staticClass:"drag-item"},[a._v("\n              "+a._s(e)+"\n            ")])})),a._v(" "),r("div",{staticClass:"fixed-item"},[a._v("操作")])],1)])]),a._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:a.reset}},[a._v("恢复默认")]),a._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:a.save}},[a._v("保存设置")])],1)])],1)};w._withStripped=!0;var S=a(625),$={components:{draggable:a.n(S).a},data:function(){return{dragOptions:{group:"fields",ghostClass:"dragging",animation:120,scroll:!0},invisibleFields:["结算规则","支付宝（线上）通道","支付宝（线下）通道","微信（线上）通道","借记卡（快捷支付）通道","借记卡（商业委托）通道","贷记卡（快捷支付）通道","贷记卡（商业委托）通道","网银支付（B2B）通道","网银支付（B2C 借记卡）通道","网银支付（B2B 贷记卡）通道","支付机构商户号","现用支付机构","累计交易金额","累计结算金额","计到账金额","会员状态","注册时间","总房间数","平均出房价格","入住率","空置房间数","新增房间数","删除房间数","商户类型","公司成立时间","公司名称","营业执照号","法人","法人身份证","预留银行卡","预留银行卡开户行","省","市"],visibleFields:["商户号（水滴）","公寓名称","会员类型","手机号","账户状态","T日余额","T+1日余额","账户总余额","待结算金额","结算手续费","费率承担方"]}},methods:{close:function(){this.$emit("cancel-set")},reset:function(){this.$emit("set-done")},save:function(){this.$emit("set-done")}}},j=(a(627),Object(c.a)($,w,[],!1,null,"0f6d1a0a",null));j.options.__file="src/entries/merchant/merchant-list/SetTableFieldDialog.vue";var F=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"freeze-merchant-dialog"},[a("el-dialog",{attrs:{title:"冻结商户",visible:!0,"close-on-click-modal":!1,"before-close":t.cancel}},[a("div",{staticClass:"freeze-merchant-dialog__main"},[a("label",{staticClass:"freeze-merchant-dialog__label"},[a("span",[t._v("冻结原因")]),t._v(" "),a("i",[t._v("*")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",resize:"none",rows:4,placeholder:"请输入冻结原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:""===t.reason},on:{click:t.confirm}},[t._v("\n        确认\n      ")])],1)])],1)};I._withStripped=!0;var U={props:["merchant"],data:function(){return{reason:""}},methods:{cancel:function(){this.$emit("cancel-freeze")},confirm:function(){this.$emit("freeze-done")}}},x=(a(628),Object(c.a)(U,I,[],!1,null,"635bf89c",null));x.options.__file="src/entries/merchant/merchant-list/FreezeMerchantDialog.vue";var M=x.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"unfreeze-merchant-dialog"},[a("el-dialog",{attrs:{title:"解冻商户",visible:!0,"close-on-click-modal":!1,"before-close":t.cancel}},[a("div",{staticClass:"unfreeze-merchant-dialog__main"},[a("label",{staticClass:"unfreeze-merchant-dialog__label"},[a("span",[t._v("解冻原因")]),t._v(" "),a("i",[t._v("*")])]),t._v(" "),a("el-input",{attrs:{type:"textarea",resize:"none",rows:4,placeholder:"请输入解冻原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:""===t.reason},on:{click:t.confirm}},[t._v("\n        确认\n      ")])],1)])],1)};z._withStripped=!0;var B={props:["merchant"],data:function(){return{reason:""}},methods:{cancel:function(){this.$emit("cancel-unfreeze")},confirm:function(){this.$emit("unfreeze-done")}}},L=(a(629),Object(c.a)(B,z,[],!1,null,"7ed2b2ea",null));L.options.__file="src/entries/merchant/merchant-list/UnfreezeMerchantDialog.vue";var P=L.exports,A=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"edit-fee-dialog"},[r("el-dialog",{attrs:{title:a.isBatch?"批量修改费率":"修改费率",visible:!0,"close-on-click-modal":!1,"before-close":a.cancel}},[r("div",{staticClass:"edit-fee-dialog__main"},[r("div",{staticClass:"edit-fee-dialog__header-bar"},[r("div",{staticClass:"edit-fee-dialog__merchant-info"},[a.isBatch?[r("span",[a._v("共选择 "+a._s(a.merchants.length)+" 个商户")]),a._v(" "),r("span",[a._v("金水滴 5 个")]),a._v(" "),r("span",[a._v("蓝钻水滴 10 个")])]:[r("span",[a._v("商户号: "+a._s(a.merchants[0].merchantId))]),a._v(" "),r("span",[a._v("公寓名称: "+a._s(a.merchants[0].apartment))]),a._v(" "),r("span",[a._v("会员类型: "+a._s(a.merchants[0].vipType))])]],2),a._v(" "),r("div",{staticClass:"edit-fee-dialog__operation"},[r("el-button",{attrs:{type:"success",size:"mini",round:"",icon:"el-icon-circle-plus"},on:{click:a.addPayChannel}},[a._v("\n            收单通道\n          ")])],1)]),a._v(" "),r("div",{staticClass:"edit-fee-dialog__channel"},[r("ul",[r("li",{staticClass:"edit-fee-dialog__channel-name"},[a._v("收单通道")]),a._v(" "),r("li",{staticClass:"edit-fee-dialog__channel-fee"},[a._v("费率(%)")])]),a._v(" "),a._l(a.payChannels,function(t){return r("ul",[r("li",{staticClass:"edit-fee-dialog__channel-name"},[r("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:t.name,callback:function(e){a.$set(t,"name",e)},expression:"channel.name"}},a._l(a.payChannelOptions,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),a._v(" "),r("li",{staticClass:"edit-fee-dialog__channel-fee"},[r("el-input-number",{attrs:{size:"medium",min:0,step:.1},model:{value:t.fee,callback:function(e){a.$set(t,"fee",e)},expression:"channel.fee"}}),a._v(" "),1<a.payChannels.length?r("span",{staticClass:"edit-fee-dialog__remove-btn el-icon-remove",on:{click:function(e){a.removePayChannel(t)}}}):a._e()],1)])})],2),a._v(" "),r("div",{staticClass:"edit-fee-dialog__reason"},[r("label",{staticClass:"edit-fee-dialog__reason__label"},[r("span",[a._v("修改原因")]),a._v(" "),r("i",[a._v("*")])]),a._v(" "),r("el-input",{attrs:{type:"textarea",resize:"none",rows:2,placeholder:"请输入修改原因"},model:{value:a.reason,callback:function(e){a.reason=e},expression:"reason"}})],1)]),a._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:a.cancel}},[a._v("取消")]),a._v(" "),r("el-button",{attrs:{type:"primary",disabled:""===a.reason},on:{click:a.confirm}},[a._v("\n        确认\n      ")])],1)])],1)};A._withStripped=!0;var E=a(461),q={props:["isBatch","merchants"],data:function(){return{payChannels:this.isBatch?E.a.meta.payChannels.slice(1,4).map(function(e){return Object.assign({},e,{fee:0})}):[].concat(this.merchants[0].payChannels),payChannelOptions:E.a.meta.payChannels.filter(function(e,t){return 0!==t}),reason:""}},methods:{addPayChannel:function(){this.payChannels=this.payChannels.concat(Object.assign({},this.payChannels[0],{fee:0}))},removePayChannel:function(t){this.payChannels=this.payChannels.filter(function(e){return e!==t})},cancel:function(){this.$emit("cancel-edit")},confirm:function(){var e=this;this.$confirm("确定修改费率？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.payChannels,e.reason;e.$emit("edit-done")}).catch(function(){})}}},O=(a(630),Object(c.a)(q,A,[],!1,null,"b45696ee",null));O.options.__file="src/entries/merchant/merchant-list/EditFeeDialog.vue";var Y=O.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-fee-payer-dialog"},[a("el-dialog",{attrs:{title:"修改费率承担方",visible:!0,"close-on-click-modal":!1,"before-close":t.cancel}},[a("div",{staticClass:"edit-fee-payer-dialog__main"},[a("div",{staticClass:"edit-fee-payer-dialog__merchant-info"},[a("span",[t._v("商户号: "+t._s(t.merchant.merchantId))]),t._v(" "),a("span",[t._v("公寓名称: "+t._s(t.merchant.apartment))]),t._v(" "),a("span",[t._v("会员类型: "+t._s(t.merchant.vipType))])]),t._v(" "),a("div",{staticClass:"edit-fee-payer-dialog__payer"},[a("label",{staticClass:"edit-fee-payer-dialog__payer__label"},[t._v("承担方")]),t._v(" "),a("div",{staticClass:"edit-fee-payer-dialog__payer__radio"},[a("el-radio",{attrs:{label:"apartment"},model:{value:t.feePayer,callback:function(e){t.feePayer=e},expression:"feePayer"}},[t._v("公寓")]),t._v(" "),a("el-radio",{attrs:{label:"tenant"},model:{value:t.feePayer,callback:function(e){t.feePayer=e},expression:"feePayer"}},[t._v("租客")])],1)]),t._v(" "),a("div",{staticClass:"edit-fee-payer-dialog__reason"},[a("label",{staticClass:"edit-fee-payer-dialog__reason__label"},[a("span",[t._v("修改原因")]),t._v(" "),a("i",[t._v("*")])]),t._v(" "),a("div",{staticClass:"edit-fee-payer-dialog__reason__input"},[a("el-input",{attrs:{type:"textarea",resize:"none",rows:4,placeholder:"请输入修改原因"},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1)])]),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary",disabled:""===t.reason},on:{click:t.confirm}},[t._v("\n        确认\n      ")])],1)])],1)};V._withStripped=!0;var R={props:["merchant"],data:function(){return{feePayer:this.merchant.feePayer,reason:""}},methods:{cancel:function(){this.$emit("cancel-edit")},confirm:function(){var e=this;this.$confirm("确定修改费率承担方？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.feePayer,e.reason;e.$emit("edit-done")}).catch(function(){})}}},Z=(a(631),Object(c.a)(R,V,[],!1,null,"78368e0c",null));Z.options.__file="src/entries/merchant/merchant-list/EditFeePayerDialog.vue";var H=Z.exports,G=a(36),J={components:{FilterBar:m,MerchantTable:v,FooterBar:y,LogDialog:T,SetTableFieldDialog:F,FreezeMerchantDialog:M,UnfreezeMerchantDialog:P,EditFeeDialog:Y,EditFeePayerDialog:H},data:function(){return{filterBarActiveName:["1"],merchants:[],parentMerchantOptions:[],currentFilter:{startTime:s()().format("YYYY-MM-DD"),endTime:s()().format("YYYY-MM-DD"),reviewStatus:"",type:"",parentMerchant:"",pid:"",data:""},pagination:null,selectedMerchants:[],hasScrollbar:!1,currentPage:1,pageSize:10,merchantsTotal:0,merchantForFreeze:null,merchantForUnfreeze:null,merchantsForEditFee:null,merchantForEditFeePayer:null,isBatchEditFee:!1,logDialogVisible:!1,setTableFieldDialogVisible:!1,freezeMerchantDialogVisible:!1,unfreezeMerchantDialogVisible:!1,editFeeDialogVisible:!1,editFeePayerDialogVisible:!1,loading:!1}},watch:{"merchants.length":function(){var e=this;this.$nextTick(function(){document.documentElement.scrollHeight>document.documentElement.clientHeight?e.hasScrollbar=!0:e.hasScrollbar=!1})}},methods:{__fetchMerchants:function(e){var t=this,a=Object.assign({},e,{token:localStorage.getItem("FINANCE_TOKEN"),page:this.currentPage,pageSize:this.pageSize});this.loading=!0,setTimeout(function(){G.a.fetchMerchantList(a).then(function(e){if(t.loading=!1,e)if(t.parentMerchantOptions=e.data.list,e.data.merchantDataModels.length<=0)t.merchants=[],t.merchantsTotal=e.data.count;else{var a=(t.currentPage-1)*t.pageSize;t.merchants=e.data.merchantDataModels.map(function(e,t){return Object.assign({},e,{no:a+t+1})}),t.merchantsTotal=e.data.count}else t.$message.error("暂无数据")}).catch(function(e){t.loading=!1,t.$message.error(e)})},200)},queryMerchants:function(e){this.currentPage=1,this.currentFilter=e,this.__fetchMerchants(this.currentFilter)},selectedMerchantChange:function(e){this.selectedMerchants=e},toSetTableField:function(){this.setTableFieldDialogVisible=!0},setTableFieldDone:function(){this.setTableFieldDialogVisible=!1},toFreezeMerchant:function(e){this.merchantForFreeze=e,this.freezeMerchantDialogVisible=!0},freezeMerchantDone:function(){this.freezeMerchantDialogVisible=!1},toUnfreezeMerchant:function(e){this.merchantForUnfreeze=e,this.unfreezeMerchantDialogVisible=!0},unfreezeMerchantDone:function(){this.unfreezeMerchantDialogVisible=!1},toEditFee:function(e,t){this.merchantsForEditFee=e?(this.isBatchEditFee=!0,this.selectedMerchants):(this.isBatchEditFee=!1,[].concat(Object.assign({},t,{payChannels:[{name:"支付宝(线上)",fee:.6},{name:"微信(线上)",fee:.6},{name:"借记卡",fee:.6}]}))),this.editFeeDialogVisible=!0},editFeeDone:function(){this.editFeeDialogVisible=!1},toEditFeePayer:function(e){this.merchantForEditFeePayer=Object.assign({},e,{feePayer:"apartment"}),this.editFeePayerDialogVisible=!0},editFeePayerDone:function(){this.editFeePayerDialogVisible=!1},currentPageChange:function(e){this.currentPage=e,this.__fetchMerchants(this.currentFilter)}},created:function(){this.__fetchMerchants(this.currentFilter)}},K=(a(632),Object(c.a)(J,r,[],!1,null,"9a9bc176",null));K.options.__file="src/entries/merchant/MerchantList.vue";t.default=K.exports},988:function(e,t,a){"use strict";a.r(t);var r=function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{staticClass:"merchant-detail"},[r("el-form",{staticClass:"merchant-detail__el-form",attrs:{"label-width":"140px"}},[r("div",{staticClass:"merchant-detail__title"},[r("div",{staticClass:"merchant-detail__title-back"},[r("i",{staticClass:"el-icon-arrow-left"}),a._v(" "),r("el-button",{attrs:{type:"text"},on:{click:function(e){a.$router.back(-1)}}},[a._v("返回")])],1),a._v(" "),r("div",{staticClass:"merchant-detail__title-status success"},[a._v("审核成功")])]),a._v(" "),r("div",{staticClass:"merchant-detail__info"},[r("div",{staticClass:"merchant-detail__info-left"},[r("h3",{staticClass:"merchant-detail__info-title"},[a._v("基本信息")])]),a._v(" "),r("div",{staticClass:"merchant-detail__info-right"},["1"==a.financeType?r("el-form-item",{attrs:{label:"用户类型："}},[r("span",[a._v(a._s(a.formatUserType(a.merchantInfo.userType)))])]):a._e(),a._v(" "),r("el-form-item",{attrs:{label:"注册时间："}},[r("span",[a._v(a._s(a.formatDateTime(a.merchantInfo.createAt)))])]),a._v(" "),r("el-form-item",{attrs:{label:"商户ID："}},[r("span",[a._v(a._s(a.merchantInfo.userId))])]),a._v(" "),r("el-form-item",{attrs:{label:"商户类型："}},[r("span",[a._v(a._s(a.formatCommercialType(a.merchantInfo.commercialType)))])]),a._v(" "),r("el-form-item",{attrs:{label:"商户名称："}},[r("span",[a._v(a._s(a.merchantInfo.commercialName))])]),a._v(" "),r("el-form-item",{attrs:{label:"证件号："}},[r("span",[a._v(a._s(a.merchantInfo.businessLicenseNo))])]),a._v(" "),r("el-form-item",{attrs:{label:"设置登入账号："}},[r("span",[a._v(a._s(a.merchantInfo.loginAccount))])])],1)]),a._v(" "),r("div",{staticClass:"merchant-detail__info"},[r("div",{staticClass:"merchant-detail__info-left"},[r("h3",{staticClass:"merchant-detail__info-title"},[a._v("商户信息")])]),a._v(" "),r("div",{staticClass:"merchant-detail__info-right"},[r("el-form-item",{attrs:{label:"开户人："}},[r("span",[a._v(a._s(a.merchantInfo.idName))])]),a._v(" "),r("el-form-item",{attrs:{label:"开户银行："}},[r("span",[a._v(a._s(a.merchantInfo.bankName))])]),a._v(" "),r("el-form-item",{attrs:{label:"银行账号："}},[r("span",[a._v(a._s(a.merchantInfo.cardNo))])])],1)]),a._v(" "),r("div",{staticClass:"merchant-detail__info"},[r("div",{staticClass:"merchant-detail__info-left"},[r("h3",{staticClass:"merchant-detail__info-title"},[a._v("其他信息")])]),a._v(" "),r("div",{staticClass:"merchant-detail__info-right"},["1"!=a.financeType?r("el-form-item",{attrs:{label:"提现模式："}},[r("span",[a._v(a._s("0"==a.merchantInfo.withdrawDepositType?"手动提现":"自动提现（固定时间）T+1日"))])]):a._e(),a._v(" "),r("el-form-item",{attrs:{label:"影像件资料："}},[r("span",[r("el-button",{attrs:{type:"text"},on:{click:a.handlePicFile}},[a._v("查看详情")])],1)])],1)]),a._v(" "),a.picFileShow?r("div",{staticClass:"merchant-detail__pic"},[r("h3",{staticClass:"merchant-detail__pic-title"},[a._v("影像件资料")]),a._v(" "),a._l(a.merchantImgUrls,function(e,t){return e?r("div",{staticClass:"merchant-detail__pic-item"},[r("img",{attrs:{src:e,alt:""},on:{click:function(e){a.previewMerchantImg(t)}}})]):a._e()})],2):a._e()]),a._v(" "),a.imgPreviewShow?r("img-preview",{attrs:{"img-index":a.imgPreviewIndex,"img-list":a.merchantImgUrls},on:{"close-click":function(e){a.imgPreviewShow=!1}}}):a._e()],1)};r._withStripped=!0;a(407);var i=a(36),n=a(226),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"img-preview"},[a("i",{staticClass:"img-preview__close",on:{click:function(){return e.$emit("close-click")}}},[e._v("×")]),e._v(" "),a("el-carousel",{attrs:{autoplay:!1,arrow:"always","initial-index":e.imgIndex}},e._l(e.imgList,function(e,t){return a("el-carousel-item",{key:t},[a("img",{attrs:{src:e,alt:""}})])}))],1)};s._withStripped=!0;var l={props:["imgIndex","imgList"],data:function(){return{}},methods:{},created:function(){}},c=(a(633),a(64)),o=Object(c.a)(l,s,[],!1,null,null,null);o.options.__file="src/components/ImgPreview.vue";var m={components:{ImgPreview:o.exports},data:function(){return{financeType:"",logShow:!1,picFileShow:!1,merchantInfo:{userType:"",createAt:"",userId:"",commercialType:"",commercialName:"",businessLicenseNo:"",loginAccount:"",idName:"",bankName:"",cardNo:"",withdrawDepositType:"",businessLicenseUrl:"",idNoUrl_1:"",idNoUrl_2:"",lincenceUrl:""},imgPreviewShow:!1,merchantImgUrls:[],imgPreviewIndex:0}},watch:{"$store.state.user.type":function(){this.financeType=this.$store.state.user.type}},methods:{__fetchMerchantBasicInfo:function(){var t=this,e=this.$route.params.merchantId;i.a.fetchMerchantBasicInfo(e).then(function(e){t.merchantInfo.userType=e.data.userType,t.merchantInfo.createAt=e.data.createAt,t.merchantInfo.userId=e.data.userId,t.merchantInfo.loginAccount=e.data.loginAccount,t.merchantInfo.commercialType=e.data.commercialType}).catch(function(e){return t.$message.error(e)})},__fetchMerchantInfo:function(){var t=this,e={userId:this.$route.params.merchantId,flag:"2"};i.a.fetchMerchantInfo(e).then(function(e){t.merchantInfo.commercialName=e.data.commercial.commercialName,t.merchantInfo.businessLicenseNo=e.data.commercial.businessLicenseNo,t.merchantInfo.idName=e.data.commercial.idName,t.merchantInfo.bankName=e.data.commercialBank?e.data.commercialBank.bankName:"",t.merchantInfo.cardNo=e.data.commercialBank?e.data.commercialBank.cardNo:"",t.merchantInfo.withdrawDepositType=e.data.commercial.withdrawDepositType,t.merchantInfo.businessLicenseUrl=e.data.commercial.businessLicenseUrl,t.merchantInfo.idNoUrl_1=e.data.commercial.idNoUrl?e.data.commercial.idNoUrl.split(",")[0]:"",t.merchantInfo.idNoUrl_2=e.data.commercial.idNoUrl?e.data.commercial.idNoUrl.split(",")[1]:"",t.merchantInfo.lincenceUrl=e.data.commercial.lincenceUrl,t.merchantImgUrls=[t.merchantInfo.businessLicenseUrl,t.merchantInfo.idNoUrl_1,t.merchantInfo.idNoUrl_2,t.merchantInfo.lincenceUrl]}).catch(function(e){return t.$message.error(e)})},formatDateTime:function(e){return n.a.getDateTime(e)},formatCommercialType:function(e){return n.a.formatCommercialType(e)},formatUserType:function(e){return n.a.formatUserType(e)},handlePicFile:function(){this.picFileShow=!this.picFileShow},previewMerchantImg:function(e){this.imgPreviewShow=!0,this.imgPreviewIndex=e}},created:function(){this.__fetchMerchantBasicInfo(),this.__fetchMerchantInfo(),this.financeType=this.$store.state.user?this.$store.state.user.type:""}},u=(a(634),Object(c.a)(m,r,[],!1,null,"5b443c4a",null));u.options.__file="src/entries/merchant/MerchantDetailSuccess.vue";t.default=u.exports},989:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.createMerchantLoading,expression:"createMerchantLoading"}],staticClass:"merchant-create"},[a("el-form",{ref:"commercial",staticClass:"merchant-create__el-form",attrs:{rules:t.rule,"label-width":"130px",model:t.commercial}},[a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("基础信息")]),t._v(" "),a("el-form-item",{attrs:{label:"商户类型"}},[a("el-input",{attrs:{disabled:""},model:{value:t.commercial.type,callback:function(e){t.$set(t.commercial,"type",e)},expression:"commercial.type"}})],1),t._v(" "),"1"==t.financeType?a("el-form-item",{attrs:{label:"用户类型"}},[a("el-input",{attrs:{disabled:""},model:{value:t.commercial.userType,callback:function(e){t.$set(t.commercial,"userType",e)},expression:"commercial.userType"}})],1):t._e(),t._v(" "),"1"==t.financeType?a("el-form-item",{attrs:{label:"所属商户"}},[a("el-input",{attrs:{disabled:""},model:{value:t.commercial.subCommercial,callback:function(e){t.$set(t.commercial,"subCommercial",e)},expression:"commercial.subCommercial"}})],1):t._e()],1),t._v(" "),a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("商户信息")]),t._v(" "),a("el-form-item",{attrs:{label:"商户名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入商户名称"},model:{value:t.commercial.name,callback:function(e){t.$set(t.commercial,"name",e)},expression:"commercial.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在城市",prop:"city"}},[a("el-cascader",{staticClass:"cascader",attrs:{placeholder:"请选择城市",options:t.provinceArr},model:{value:t.commercial.city,callback:function(e){t.$set(t.commercial,"city",e)},expression:"commercial.city"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"营业执照号",prop:"businessLicenseNo"}},[a("el-input",{attrs:{placeholder:"请输入营业执照号"},model:{value:t.commercial.businessLicenseNo,callback:function(e){t.$set(t.commercial,"businessLicenseNo",e)},expression:"commercial.businessLicenseNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人手机号码",prop:"mobileNo"}},[a("el-input",{attrs:{placeholder:"请输入手机号码"},model:{value:t.commercial.mobileNo,callback:function(e){t.$set(t.commercial,"mobileNo",e)},expression:"commercial.mobileNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"营业期限",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"startTime"}},[a("el-date-picker",{staticClass:"date",attrs:{type:"date",placeholder:"起始日期"},model:{value:t.commercial.startTime,callback:function(e){t.$set(t.commercial,"startTime",e)},expression:"commercial.startTime"}})],1)],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"endTime"}},[a("el-date-picker",{ref:"endTime",staticClass:"date",attrs:{type:"date",disabled:t.maxEndTime,placeholder:"截止日期"},model:{value:t.commercial.endTime,callback:function(e){t.$set(t.commercial,"endTime",e)},expression:"commercial.endTime"}})],1)],1),t._v(" "),a("div",{class:["toggle-button",t.maxEndTime?"active":""],on:{click:t.setMaxEndTime}},[t._v("长期有效")])],1),t._v(" "),a("el-form-item",{attrs:{label:"营业执照上传",prop:"businessLicenseUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadBusinessLicense,"before-upload":t.beforeAvatarUpload}},[t.commercial.businessLicenseUrl?a("img",{staticClass:"avatar",attrs:{src:t.commercial.businessLicenseUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("el-form-item",{staticStyle:{visibility:"hidden"},attrs:{prop:"businessLicenseUrl"}},[a("el-input",{attrs:{type:"hidden"},model:{value:t.commercial.businessLicenseUrl,callback:function(e){t.$set(t.commercial,"businessLicenseUrl",e)},expression:"commercial.businessLicenseUrl"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("法人信息")]),t._v(" "),a("el-form-item",{attrs:{label:"法定代表人",prop:"idName"}},[a("el-input",{attrs:{placeholder:"请输入法定代表人"},model:{value:t.commercial.idName,callback:function(e){t.$set(t.commercial,"idName",e)},expression:"commercial.idName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"法人身份证号",prop:"idNo"}},[a("el-input",{attrs:{placeholder:"请输入法人身份证号"},model:{value:t.commercial.idNo,callback:function(e){t.$set(t.commercial,"idNo",e)},expression:"commercial.idNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"法人身份证上传",prop:"idNoUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadIdNo_1,"before-upload":t.beforeAvatarUpload}},[t.formatIdNoUrl(t.commercial.idNoUrl,0)?a("img",{staticClass:"avatar",attrs:{src:t.formatIdNoUrl(t.commercial.idNoUrl,0)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadIdNo_2,"before-upload":t.beforeAvatarUpload}},[t.formatIdNoUrl(t.commercial.idNoUrl,1)?a("img",{staticClass:"avatar",attrs:{src:t.formatIdNoUrl(t.commercial.idNoUrl,1)}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-tip"},[a("i",[t._v("身份证（正面）")]),t._v(" "),a("i",[t._v("身份证（反面）")])])],1)],1),t._v(" "),a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("预留银行账户信息")]),t._v(" "),a("el-form-item",{attrs:{label:"开户银行",prop:"bankCode"}},[a("el-select",{ref:"bank",staticClass:"search-bank",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请搜索开户银行","remote-method":t.searchBank,loading:t.searchBankLoading},model:{value:t.commercial.bankCode,callback:function(e){t.$set(t.commercial,"bankCode",e)},expression:"commercial.bankCode"}},t._l(t.searchBankList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开户银行全称",prop:"branchName"}},[a("el-input",{model:{value:t.commercial.branchName,callback:function(e){t.$set(t.commercial,"branchName",e)},expression:"commercial.branchName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"银行账号",prop:"cardNo"}},[a("el-input",{model:{value:t.commercial.cardNo,callback:function(e){t.$set(t.commercial,"cardNo",e)},expression:"commercial.cardNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开户许可证上传",prop:"lincenceUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadLincence,"before-upload":t.beforeAvatarUpload}},[t.commercial.lincenceUrl?a("img",{staticClass:"avatar",attrs:{src:t.commercial.lincenceUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),"1"==t.financeType?a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("支付设置")]),t._v(" "),a("el-form-item",{attrs:{label:"通道费承担方",prop:"payAssume"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.commercial.payAssume,callback:function(e){t.$set(t.commercial,"payAssume",e)},expression:"commercial.payAssume"}},t._l(t.payAssume,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"支付通道费",prop:"serviceCharge"}},[a("el-input",{attrs:{autocomplete:"off"},on:{change:t.formatRatio},model:{value:t.commercial.serviceCharge,callback:function(e){t.$set(t.commercial,"serviceCharge",e)},expression:"commercial.serviceCharge"}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("%")])],1)],1):t._e(),t._v(" "),a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("提现模式")]),t._v(" "),a("el-form-item",{attrs:{label:"提现模式",prop:"drawType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.commercial.drawType,callback:function(e){t.$set(t.commercial,"drawType",e)},expression:"commercial.drawType"}},t._l(t.drawType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),t._v(" "),a("div",{staticClass:"merchant-create__el-form-label"},[a("h3",[t._v("账号设置")]),t._v(" "),a("el-form-item",{attrs:{label:"设置登入账号",prop:"account"}},[a("el-input",{model:{value:t.commercial.account,callback:function(e){t.$set(t.commercial,"account",e)},expression:"commercial.account"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{on:{click:function(e){t.resetForm("commercial")}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("commercial")}}},[t._v("提交")])],1)],1)],1)};r._withStripped=!0;a(636),a(407);var n=a(36),i=[{value:"BOC",label:"中国银行"},{value:"ABC",label:"中国农业银行"},{value:"ICBC",label:"中国工商银行"},{value:"CCB",label:"中国建设银行"},{value:"COMM",label:"交通银行"},{value:"PSBC",label:"中国邮政储蓄银行"},{value:"CMB",label:"招商银行"},{value:"CITIC",label:"中信银行"},{value:"CEB",label:"中国光大银行"},{value:"HXB",label:"华夏银行"},{value:"GDB",label:"广发银行"},{value:"SPDB",label:"浦东发展银行"},{value:"SHB",label:"上海银行"},{value:"SPAB",label:"平安银行"}],s=a(226),l={data:function(){var n=this;return{financeType:"",commercial:{type:"企业商户",userType:"平台用户",subCommercial:"水滴管家",name:"",city:[],businessLicenseNo:"",startTime:"",endTime:"",businessLicenseUrl:"",idName:"",idNo:"",idNoUrl:"",bankCode:"",bankName:"",branchName:"",cardNo:"",lincenceUrl:"",payAssume:"renter",serviceCharge:"0.50",drawType:"0",account:""},idNoUrl_1:"",idNoUrl_2:"",provinceArr:[],maxEndTime:!1,searchBankLoading:!1,rule:{name:[{required:!0,message:"请输入商户名称",trigger:"blur"}],city:[{required:!0,message:"请选择城市",trigger:"blur"}],businessLicenseNo:[{required:!0,message:"请输入营业执照号",trigger:"blur"}],startTime:[{type:"date",required:!0,message:"请选择起始日期",trigger:"blur"},{validator:function(e,t,a){var r=t?t.getTime():"",i=n.commercial.endTime?n.commercial.endTime.getTime():"";""!==i&&i<r?a(new Error("开始时间不得晚于结束时间")):a()},trigger:"blur"}],endTime:[{validator:function(e,t,a){var r=n.commercial.startTime?n.commercial.startTime.getTime():"",i=t?t.getTime():"";""!==r&&""!==i&&i<r?a(new Error("结束时间不得早于开始时间")):a()},trigger:"blur"}],businessLicenseUrl:[{required:!0,message:"请上传营业执照",trigger:"change"}],idName:[{required:!0,message:"请输入法定代表人",trigger:"blur"}],idNo:[{required:!0,message:"请输入法人身份证号",trigger:"blur"},{min:15,max:20,message:"请输入正确的身份证号",trigger:"blur"}],mobileNo:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3,4,5,6,7,8,9]\d{9}$/.test(t)?a():a(new Error("请输入正确的手机号"))},trigger:"blur"}],idNoUrl:[{required:!0,message:"请上传法人身份证",trigger:"blur"}],bankCode:[{required:!0,message:"请选择开户银行",trigger:"blur"}],branchName:[{required:!0,message:"请输入开户银行全称",trigger:"blur"}],cardNo:[{required:!0,message:"请输入银行账号",trigger:"blur"}],lincenceUrl:[{required:!0,message:"请上传开户许可证",trigger:"blur"}],payAssume:[{required:!0,message:"请选择通道费承担方",trigger:"change"}],serviceCharge:[{required:!0,message:"请输入支付通道费",trigger:"blur"}],drawType:[{required:!0,message:"请选择提现模式",trigger:"change"}],account:[{required:!0,message:"请设置登入账号",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"]}]},searchBankList:[],payAssume:[{value:"renter",label:"付款方承担"},{value:"landlord",label:"收款方承担"}],drawType:[{value:"1",label:"自动提现（固定时间）T+1日"},{value:"0",label:"手动提现"}],createMerchantLoading:!1}},watch:{"$store.state.user.type":function(){this.financeType=this.$store.state.user.type}},methods:{__fetchBankList:function(){this.searchBankList=i},__fetchCity:function(){var c=this;n.a.getRegions().then(function(e){for(var t=e.data.length,a=0;a<t;a++){var r=void 0;for(var i in e.data[a]){for(var n=void 0,s=[],l=0;l<e.data[a][i].length;l++)n={value:e.data[a][i][l],label:e.data[a][i][l]},s.push(n);r={value:i,label:i,children:s}}c.provinceArr.push(r)}}).catch(function(e){return c.$message.error(e)})},setMaxEndTime:function(){this.maxEndTime=!this.maxEndTime,this.commercial.endTime=""},searchBank:function(e){var i=this;if(""!==e){this.searchBankLoading=!0;var t={type:3,keyword:e};n.a.searchBank(t).then(function(r){setTimeout(function(){i.searchBankLoading=!1;var e=[];if(0<r.data.length){for(var t=0;t<r.data.length;t++){var a={value:r.data[t].bankCode,label:r.data[t].bankName};e.push(a)}i.searchBankList=e}else i.searchBankList=[]},200)}).catch(function(e){return i.$message.error("获取银行列表失败")})}else this.__fetchBankList(),this.commercial.bankCode=""},formatDate:function(e){var t=e.getTime();return s.a.getDate(t)},formatRatio:function(){this.commercial.serviceCharge<=.3&&(this.commercial.serviceCharge=.3),100<=this.commercial.serviceCharge&&(this.commercial.serviceCharge=100),this.commercial.serviceCharge=isNaN(parseFloat(this.commercial.serviceCharge))?"0.30":parseFloat(this.commercial.serviceCharge).toFixed(2)},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message.error("请填写必填字段"),!1;if(""!=a.commercial.idNoUrl.split(",")[0]&&""!=a.commercial.idNoUrl.split(",")[1]){var t=localStorage.getItem("FINANCE_TOKEN")||"";a.createMerchantLoading=!0,n.a.createUser(t).then(function(e){a.userId=e.data;var t={commercial:{userId:e.data,commercialType:3,commercialName:a.commercial.name,province:a.commercial.city[0],city:a.commercial.city[1],businessLicenseNo:a.commercial.businessLicenseNo,businessLicenseUrl:a.commercial.businessLicenseUrl,startTime:a.formatDate(a.commercial.startTime),endTime:""==a.commercial.endTime?"":a.formatDate(a.commercial.endTime),idName:a.commercial.idName,idNo:a.commercial.idNo,idNoUrl:a.commercial.idNoUrl,mobileNo:a.commercial.mobileNo,lincenceUrl:a.commercial.lincenceUrl},commercialBank:{flag:"B",bankCode:a.commercial.bankCode,branchName:a.commercial.branchName,bankName:a.$refs.bank.query,cardNo:a.commercial.cardNo}};n.a.registerCommercial(t).then(function(e){var t={userId:a.userId,paySet:{assumePerson:a.commercial.payAssume,serviceCharge:a.commercial.serviceCharge},withDrawSet:a.commercial.drawType,accountSet:a.commercial.account};n.a.setAccountSetting(t).then(function(e){a.$message({message:"新增商户成功",type:"success"}),a.$router.push({name:"merchantMgt__result",params:{id:a.userId}})}).catch(function(e){return a.$message.error(e)})}).catch(function(e){var t={userId:a.userId,paySet:{assumePerson:a.commercial.payAssume,serviceCharge:a.commercial.serviceCharge},withDrawSet:a.commercial.drawType,accountSet:a.commercial.account};n.a.setAccountSetting(t).then(function(e){a.$message({message:"新增商户成功",type:"success"}),a.$router.push({name:"merchantMgt__result",params:{id:a.userId}})}).catch(function(e){return a.$message.error(e)})})}).catch(function(e){return a.$message.error(e)})}else a.$message.error("请上传法人身份证")})},resetForm:function(e){this.$refs[e].resetFields()},formatIdNoUrl:function(e,t){return this.commercial.idNoUrl.split(",")[t]},uploadBusinessLicense:function(e){this.uploadSectionFile(e,"business")},uploadIdNo_1:function(e){this.uploadSectionFile(e,"idNo_1")},uploadIdNo_2:function(e){this.uploadSectionFile(e,"idNo_2")},uploadLincence:function(e){this.uploadSectionFile(e,"lincence")},uploadSectionFile:function(e,a){var r=this,t=new FormData;t.append("Filedata",e.file),n.a.uploadImg(t).then(function(e){var t=e.url;switch(a){case"business":r.commercial.businessLicenseUrl=t;break;case"idNo_1":r.idNoUrl_1=t,r.commercial.idNoUrl=r.idNoUrl_1+","+r.idNoUrl_2;break;case"idNo_2":r.idNoUrl_2=t,r.commercial.idNoUrl=r.idNoUrl_1+","+r.idNoUrl_2;break;case"lincence":r.commercial.lincenceUrl=t}r.$refs.commercial.validateField(["businessLicenseUrl","lincenceUrl","idNoUrl"])}).catch(function(e){return r.$message.error(e)})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type||"image/png"===e.type,a=e.size/1024/1024<5;return t||this.$message.error("上传图片必须是 JPG 或者 PNG 格式!"),a||this.$message.error("上传图片大小不能超过 5MB!"),t&&a}},created:function(){this.__fetchCity(),this.__fetchBankList(),this.financeType=this.$store.state.user?this.$store.state.user.type:""}},c=(a(637),a(64)),o=Object(c.a)(l,r,[],!1,null,null,null);o.options.__file="src/entries/merchant/CreateMerchant.vue";t.default=o.exports},993:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant-detail"},[a("el-form",{ref:"merchantDetail",staticClass:"merchant-detail__el-form",attrs:{rules:t.rule,model:t.merchantDetail,"label-width":"150px"}},[a("div",{staticClass:"merchant-detail__title"},[a("div",{staticClass:"merchant-detail__title-back"},[a("i",{staticClass:"el-icon-arrow-left"}),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(e){t.$router.back(-1)}}},[t._v("返回")])],1),t._v(" "),"F"==t.$route.params.status?a("div",{staticClass:"merchant-detail__title-status fault"},[t._v("审核失败")]):"P"==t.$route.params.status?a("div",{staticClass:"merchant-detail__title-status warning"},[t._v("审核中")]):t._e()]),t._v(" "),a("el-collapse",{model:{value:t.detailActiveName,callback:function(e){t.detailActiveName=e},expression:"detailActiveName"}},[a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"基本信息",name:"1"}},[a("el-form-item",{attrs:{label:"创建时间："}},[a("span",[t._v(t._s(t.formatDateTime(t.merchantBasicInfo.createAt)))])]),t._v(" "),a("el-form-item",{attrs:{label:"商户ID："}},[a("span",[t._v(t._s(t.merchantBasicInfo.userId))])]),t._v(" "),a("el-form-item",{attrs:{label:"商户类型："}},[a("span",[t._v(t._s(t.formatCommercialType(t.merchantBasicInfo.commercialType)))])]),t._v(" "),"1"==t.financeType?a("el-form-item",{attrs:{label:"所属商户："}},[a("span",[t._v(t._s(t.merchantBasicInfo.belongComemrcialName))])]):t._e(),t._v(" "),"1"==t.financeType?a("el-form-item",{attrs:{label:"用户类型："}},[a("span",[t._v(t._s(t.formatUserType(t.merchantBasicInfo.userType)))])]):t._e()],1)],1),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"商户信息",name:"2"}},[a("el-form-item",{attrs:{label:"商户名称：",prop:"commercialName"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.commercialName,callback:function(e){t.$set(t.merchantDetail,"commercialName",e)},expression:"merchantDetail.commercialName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在城市：",prop:"city"}},[a("el-cascader",{staticClass:"cascader",attrs:{disabled:!!t.checkStatus,options:t.provinceArr},on:{change:t.cityChange},model:{value:t.merchantDetail.city,callback:function(e){t.$set(t.merchantDetail,"city",e)},expression:"merchantDetail.city"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"营业执照号：",prop:"businessLicenseNo"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.businessLicenseNo,callback:function(e){t.$set(t.merchantDetail,"businessLicenseNo",e)},expression:"merchantDetail.businessLicenseNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系人手机号码",prop:"mobileNo"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.mobileNo,callback:function(e){t.$set(t.merchantDetail,"mobileNo",e)},expression:"merchantDetail.mobileNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"营业期限：",required:""}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"startTime"}},[a("el-date-picker",{staticClass:"date",attrs:{type:"date",disabled:!!t.checkStatus,placeholder:"起始日期"},model:{value:t.merchantDetail.startTime,callback:function(e){t.$set(t.merchantDetail,"startTime",e)},expression:"merchantDetail.startTime"}})],1)],1),t._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{prop:"endTime"}},[a("el-date-picker",{ref:"endTime",staticClass:"date",attrs:{type:"date",disabled:!(!t.checkStatus&&!t.maxEndTime),placeholder:"截止日期"},model:{value:t.merchantDetail.endTime,callback:function(e){t.$set(t.merchantDetail,"endTime",e)},expression:"merchantDetail.endTime"}})],1)],1),t._v(" "),a("div",{class:["toggle-button",t.maxEndTime?"active":""],on:{click:t.setMaxEndTime}},[t._v("长期有效")])],1),t._v(" "),a("el-form-item",{attrs:{label:"营业执照影像件：",prop:"businessLicenseUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadBusinessLicense,"before-upload":t.beforeAvatarUpload}},[t.merchantDetail.businessLicenseUrl?a("img",{staticClass:"avatar",attrs:{src:t.merchantDetail.businessLicenseUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("el-form-item",{staticStyle:{visibility:"hidden"},attrs:{prop:"businessLicenseUrl"}},[a("el-input",{attrs:{type:"hidden"},model:{value:t.merchantDetail.businessLicenseUrl,callback:function(e){t.$set(t.merchantDetail,"businessLicenseUrl",e)},expression:"merchantDetail.businessLicenseUrl"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"法人信息",name:"3"}},[a("el-form-item",{attrs:{label:"法定代表人：",prop:"idName"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.idName,callback:function(e){t.$set(t.merchantDetail,"idName",e)},expression:"merchantDetail.idName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"法人身份证号：",prop:"idNo"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.idNo,callback:function(e){t.$set(t.merchantDetail,"idNo",e)},expression:"merchantDetail.idNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"法人身份证影像件：",prop:"idNoUrl_1"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadIdNo_1,"before-upload":t.beforeAvatarUpload}},[t.merchantDetail.idNoUrl_1?a("img",{staticClass:"avatar",attrs:{src:t.merchantDetail.idNoUrl_1}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadIdNo_2,"before-upload":t.beforeAvatarUpload}},[t.merchantDetail.idNoUrl_2?a("img",{staticClass:"avatar",attrs:{src:t.merchantDetail.idNoUrl_2}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})]),t._v(" "),a("div",{staticClass:"upload-tip"},[a("i",[t._v("身份证（正面）")]),t._v(" "),a("i",[t._v("身份证（反面）")])])],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"预留银行账户信息",name:"4"}},[a("el-form-item",{attrs:{label:"开户银行",prop:"bankCode"}},[a("el-select",{ref:"bank",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择开户银行",disabled:!!t.checkStatus,"remote-method":t.searchBank,loading:t.searchBankLoading},model:{value:t.merchantDetail.bankCode,callback:function(e){t.$set(t.merchantDetail,"bankCode",e)},expression:"merchantDetail.bankCode"}},t._l(t.searchBankList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"开户银行全称：",prop:"branchName"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.branchName,callback:function(e){t.$set(t.merchantDetail,"branchName",e)},expression:"merchantDetail.branchName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"银行账号：",prop:"cardNo"}},[a("el-input",{attrs:{disabled:!!t.checkStatus},model:{value:t.merchantDetail.cardNo,callback:function(e){t.$set(t.merchantDetail,"cardNo",e)},expression:"merchantDetail.cardNo"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"开户许可证影像件：",prop:"lincenceUrl"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://jz.api.ih2ome.cn/api/picture/image_upload/","show-file-list":!1,"http-request":t.uploadLincence,"before-upload":t.beforeAvatarUpload}},[t.merchantDetail.lincenceUrl?a("img",{staticClass:"avatar",attrs:{src:t.merchantDetail.lincenceUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1)],1),t._v(" "),"1"==t.financeType?a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"支付设置",name:"5"}},[a("el-form-item",{attrs:{label:"通道费承担方：",prop:"payAssume"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.merchantDetail.payAssume,callback:function(e){t.$set(t.merchantDetail,"payAssume",e)},expression:"merchantDetail.payAssume"}},t._l(t.payAssume,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"支付通道费：",prop:"serviceCharge"}},[a("el-input",{attrs:{autocomplete:"off"},on:{change:t.formatRatio},model:{value:t.merchantDetail.serviceCharge,callback:function(e){t.$set(t.merchantDetail,"serviceCharge",e)},expression:"merchantDetail.serviceCharge"}}),t._v(" "),a("span",{staticClass:"unit"},[t._v("%")])],1)],1)],1):t._e(),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"提现模式",name:"6"}},[a("el-form-item",{attrs:{label:"提现模式：",prop:"drawType"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.merchantDetail.drawType,callback:function(e){t.$set(t.merchantDetail,"drawType",e)},expression:"merchantDetail.drawType"}},t._l(t.drawType,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"账号设置",name:"7"}},[a("el-form-item",{attrs:{label:"设置登入账号：",prop:"account"}},[a("el-input",{model:{value:t.merchantDetail.account,callback:function(e){t.$set(t.merchantDetail,"account",e)},expression:"merchantDetail.account"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"merchant-detail__info"},[a("el-collapse-item",{attrs:{title:"审核信息",name:"8"}},[a("el-form-item",{attrs:{label:"更新时间："}},[a("span",[t._v(t._s(t.merchantDetail.updateTime))])]),t._v(" "),a("el-form-item",{attrs:{label:"审核结果："}},[a("span",[t._v(t._s(t.formatReviewStatus(t.merchantDetail.reviewStatus)))])]),t._v(" "),a("el-form-item",{attrs:{label:"错误字段："}},[a("span",{staticStyle:{color:"#ff4949"}},[t._v(t._s(t.merchantDetail.reviewRemark))])])],1)],1)]),t._v(" "),a("div",{staticClass:"merchant-detail__footer"},[a("el-button",{on:{click:function(e){t.resetForm("merchantDetail")}}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitForm("merchantDetail")}}},[t._v("重新提交")])],1)],1)],1)};r._withStripped=!0;a(407),a(234);var n=a(36),i=a(226),s={data:function(){var n=this;return{financeType:"",detailActiveName:["2","3","4","5","6","7"],checkStatus:"",merchantDetail:{commercialName:"",city:[],businessLicenseNo:"",mobileNo:"",startTime:"",endTime:"",businessLicenseUrl:"",idName:"",idNo:"",idNoUrl_1:"",idNoUrl_2:"",bankCode:"",bankName:"",branchName:"",cardNo:"",lincenceUrl:"",payAssume:"",serviceCharge:"",drawType:"",account:"",updateTime:"",reviewStatus:"",reviewRemark:""},provinceArr:[],maxEndTime:!1,searchBankLoading:!1,merchantBasicInfo:{createAt:""},payAssume:[{value:"renter",label:"付款方承担"},{value:"landlord",label:"收款方承担"}],drawType:[{value:"1",label:"自动提现（固定时间）T+1日"},{value:"0",label:"手动提现"}],rule:{commercialName:[{required:!0,message:"请输入商户名称",trigger:"blur"}],city:[{required:!0,message:"请选择城市",trigger:"blur"}],businessLicenseNo:[{required:!0,message:"请输入营业执照号",trigger:"blur"}],startTime:[{type:"date",required:!0,message:"请选择起始日期",trigger:"blur"},{validator:function(e,t,a){var r=t?t.getTime():"",i=n.merchantDetail.endTime?n.merchantDetail.endTime.getTime():"";""!==i&&i<r?a(new Error("开始时间不得晚于结束时间")):a()},trigger:"blur"}],endTime:[{validator:function(e,t,a){var r=n.merchantDetail.startTime?n.merchantDetail.startTime.getTime():"",i=t?t.getTime():"";""!==r&&""!==i&&i<r?a(new Error("结束时间不得早于开始时间")):a()},trigger:"blur"}],businessLicenseUrl:[{required:!0,message:"请上传营业执照",trigger:"blur"}],idName:[{required:!0,message:"请输入法定代表人",trigger:"blur"}],idNo:[{required:!0,message:"请输入法人身份证号",trigger:"blur"},{min:15,max:20,message:"请输入正确的身份证号",trigger:"blur"}],mobileNo:[{required:!0,message:"请输入联系人手机号",trigger:"blur"},{validator:function(e,t,a){/^1[3,4,5,6,7,8,9]\d{9}$/.test(t)?a():a(new Error("请输入正确的手机号"))},trigger:"blur"}],idNoUrl_1:[{required:!0,message:"请上传法人身份证",trigger:"blur"}],bankCode:[{required:!0,message:"请选择开户银行",trigger:"blur"}],branchName:[{required:!0,message:"请输入开户银行全称",trigger:"blur"}],cardNo:[{required:!0,message:"请输入银行账号",trigger:"blur"}],lincenceUrl:[{required:!0,message:"请上传开户许可证",trigger:"blur"}],payAssume:[{required:!0,message:"请选择通道费承担方",trigger:"blur"}],serviceCharge:[{required:!0,message:"请输入支付通道费",trigger:"blur"}],drawType:[{required:!0,message:"请选择提现模式",trigger:"blur"}],account:[{required:!0,message:"请设置登入账号",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:["blur"]}]},bankList:[{value:"BOC",label:"中国银行"},{value:"ABC",label:"中国农业银行"},{value:"ICBC",label:"中国工商银行"},{value:"CCB",label:"中国建设银行"},{value:"COMM",label:"交通银行"},{value:"PSBC",label:"中国邮政储蓄银行"},{value:"CMB",label:"招商银行"},{value:"CITIC",label:"中信银行"},{value:"CEB",label:"中国光大银行"},{value:"HXB",label:"华夏银行"},{value:"GDB",label:"广发银行"},{value:"SPDB",label:"浦东发展银行"},{value:"SHB",label:"上海银行"},{value:"SPAB",label:"平安银行"}],searchBankList:[]}},watch:{"$store.state.user.type":function(){this.financeType=this.$store.state.user.type}},methods:{__fetchBankList:function(){this.searchBankList=this.bankList},__fetchCity:function(){var c=this;n.a.getRegions().then(function(e){for(var t=e.data.length,a=0;a<t;a++){var r=void 0;for(var i in e.data[a]){for(var n=void 0,s=[],l=0;l<e.data[a][i].length;l++)n={value:e.data[a][i][l],label:e.data[a][i][l]},s.push(n);r={value:i,label:i,children:s}}c.provinceArr.push(r)}}).catch(function(e){return c.$message.error(e)})},searchBank:function(e){var i=this;if(""!==e){this.searchBankLoading=!0;var t={type:3,keyword:e};n.a.searchBank(t).then(function(r){setTimeout(function(){i.searchBankLoading=!1;var e=[];if(0<r.data.length){for(var t=0;t<r.data.length;t++){var a={value:r.data[t].bankCode,label:r.data[t].bankName};e.push(a)}i.searchBankList=e}else i.searchBankList=[]},100)}).catch(function(e){return i.$message.error("获取银行列表失败")})}else this.__fetchBankList(),this.merchantDetail.bankCode=""},__fetchMerchantBasicInfo:function(){var t=this,e=this.$route.params.merchantId;n.a.fetchMerchantBasicInfo(e).then(function(e){t.merchantBasicInfo=e.data}).catch(function(e){return t.$message.error(e)})},__fetchMerchantInfo:function(){var i=this,e={userId:this.$route.params.merchantId,flag:"1"};n.a.fetchMerchantInfo(e).then(function(e){if(e.data){i.checkStatus=e.data.commercial.status;var t=e.data.commercial.startTime?new Date(e.data.commercial.startTime):"",a=e.data.commercial.endTime?new Date(e.data.commercial.endTime):"",r=e.data.commercial.updateTime?i.formatDateTime(e.data.commercial.updateTime):"";i.merchantDetail=Object.assign({},i.merchantDetail,e.data.commercial,e.data.commercialBank,{city:[e.data.commercial.province,e.data.commercial.city],startTime:t,endTime:a,updateTime:r,idNoUrl_1:e.data.commercial.idNoUrl.split(",")[0],idNoUrl_2:e.data.commercial.idNoUrl.split(",")[1]}),i.merchantDetail.bankCode&&(i.__fetchBankList(),i.searchBankList.push({label:i.merchantDetail.bankName,value:i.merchantDetail.bankCode}))}else i.$message.error("获取商户信息失败")}).catch(function(e){return i.$message.error(e)})},__fetchAccountSetting:function(){var t=this,e=this.$route.params.merchantId;n.a.fetchAccountSetting(e).then(function(e){e.data?t.merchantDetail=Object.assign({},t.merchantDetail,{payAssume:e.data.paySet.assumePerson,serviceCharge:e.data.paySet.serviceCharge,drawType:e.data.withDrawSet,account:e.data.accountSet}):t.$message.error("获取商户设置失败")}).catch(function(e){return t.$message.error(e)})},setMaxEndTime:function(){this.checkStatus||(this.maxEndTime=!this.maxEndTime,this.merchantDetail.endTime="")},formatDate:function(e){var t=e.getTime();return i.a.getDate(t)},formatDateTime:function(e){return i.a.getDateTime(e)},formatRatio:function(){this.merchantDetail.serviceCharge<=.3&&(this.merchantDetail.serviceCharge=.3),100<=this.merchantDetail.serviceCharge&&(this.merchantDetail.serviceCharge=100),this.merchantDetail.serviceCharge=isNaN(parseFloat(this.merchantDetail.serviceCharge))?"0.30":parseFloat(this.merchantDetail.serviceCharge).toFixed(2)},formatCommercialType:function(e){return i.a.formatCommercialType(e)},formatReviewStatus:function(e){return i.a.formatReviewStatus(e)},formatUserType:function(e){return i.a.formatUserType(e)},setAccount:function(){var t=this,e={userId:this.userId,paySet:{assumePerson:this.merchantDetail.payAssume,serviceCharge:this.merchantDetail.serviceCharge},withDrawSet:this.merchantDetail.drawType,accountSet:this.merchantDetail.account};n.a.setAccountSetting(e).then(function(e){}).catch(function(e){return t.$message.error(e)})},submitForm:function(e){var a=this;this.$refs[e].validate(function(e){if(!e)return a.$message.error("请填写必填字段"),!1;if(""!=a.merchantDetail.idNoUrl_2){a.userId=a.$route.params.merchantId;var t={commercial:{userId:a.userId,commercialType:3,commercialName:a.merchantDetail.commercialName,province:a.merchantDetail.city[0],city:a.merchantDetail.city[1],businessLicenseNo:a.merchantDetail.businessLicenseNo,businessLicenseUrl:a.merchantDetail.businessLicenseUrl,startTime:a.formatDate(a.merchantDetail.startTime),endTime:""==a.merchantDetail.endTime?"":a.formatDate(a.merchantDetail.endTime),idName:a.merchantDetail.idName,idNo:a.merchantDetail.idNo,idNoUrl:a.merchantDetail.idNoUrl_1+","+a.merchantDetail.idNoUrl_2,mobileNo:a.merchantDetail.mobileNo,lincenceUrl:a.merchantDetail.lincenceUrl},commercialBank:{flag:"B",bankCode:a.merchantDetail.bankCode,branchName:a.merchantDetail.branchName,bankName:a.$refs.bank.query,cardNo:a.merchantDetail.cardNo}};n.a.registerCommercial(t).then(function(e){a.setAccount(),a.$message({message:"修改商户信息成功",type:"success"}),a.$router.push({name:"merchantMgt__result",params:{id:a.userId}})}).catch(function(e){a.setAccount(),a.$message({message:"修改商户信息成功",type:"success"}),a.$router.push({name:"merchantMgt__result",params:{id:a.userId}})})}else a.$message.error("请上传法人身份证")})},resetForm:function(e){this.__fetchMerchantInfo(),this.__fetchAccountSetting(),this.$message({message:"重置成功",type:"success"})},uploadBusinessLicense:function(e){this.uploadSectionFile(e,"business")},uploadIdNo_1:function(e){this.uploadSectionFile(e,"idNo_1")},uploadIdNo_2:function(e){this.uploadSectionFile(e,"idNo_2")},uploadLincence:function(e){this.uploadSectionFile(e,"lincence")},uploadSectionFile:function(e,a){var r=this,t=new FormData;t.append("Filedata",e.file),n.a.uploadImg(t).then(function(e){var t=e.url;switch(a){case"business":r.merchantDetail.businessLicenseUrl=t;break;case"idNo_1":r.merchantDetail.idNoUrl_1=t;break;case"idNo_2":r.merchantDetail.idNoUrl_2=t;break;case"lincence":r.merchantDetail.lincenceUrl=t}r.$refs.merchantDetail.validateField(["businessLicenseUrl","lincenceUrl","idNoUrl"])}).catch(function(e){return r.$message.error("超过上传最大数量")})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&a},cityChange:function(e){}},created:function(){this.__fetchMerchantBasicInfo(),this.__fetchMerchantInfo(),this.__fetchAccountSetting(),this.financeType=this.$store.state.user?this.$store.state.user.type:""},mounted:function(){this.__fetchBankList(),this.__fetchCity()}},l=(a(635),a(64)),c=Object(l.a)(s,r,[],!1,null,null,null);c.options.__file="src/entries/merchant/MerchantDetailFail.vue";t.default=c.exports},995:function(e,t,a){"use strict";a.r(t);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant-result"},[a("i",{staticClass:"merchant-result__icon el-icon-success "}),t._v(" "),a("p",[t._v("提交成功，请等待审核")]),t._v(" "),a("p",[t._v("商户号："+t._s(this.$route.params.id))]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.$router.push({name:"merchantMgt__merchantList"})}}},[t._v("\n    返回商户列表\n  ")])],1)};r._withStripped=!0;var i={data:function(){return{}},methods:{},created:function(){}},n=(a(638),a(64)),s=Object(n.a)(i,r,[],!1,null,null,null);s.options.__file="src/entries/merchant/result.vue";t.default=s.exports}}]);